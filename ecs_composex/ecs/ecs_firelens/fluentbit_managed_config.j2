{%- if enable_health_check -%}
[SERVICE]
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_PORT    2020
    Health_Check On
    # customize error and retry thresholds and evaluation period as desired
    HC_Errors_Count 5
    HC_Retry_Failure_Count 5
    HC_Period 5
{% endif %}

{% if grace_period -%}
[SERVICE]
    Flush 1
    Grace {{ grace_period | int }}
{% endif %}
{%- if source_file %}
{{ source_file }}
{% endif %}
{% for firehose_destination in firelens_firehose_destinations %}
[OUTPUT]
    Name kinesis_firehose
    Match {{ firehose_destination.service }}-firelens*
{%- for key, value in firehose_destination.output_definition.items() %}
    {{ key| safe }} {{ value | safe }}
{%- endfor -%}
{% endfor %}
